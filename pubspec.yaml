name: flutter_ui_kit_workspace
description: Workspace root (not a package published to pub.dev)
publish_to: "none"

environment:
  sdk: "^3.10.4"

dev_dependencies:
  melos: ^7.0.0

workspace:
  - packages/core
  - packages/components
  - apps/showcase

melos:
  scripts:
    analyze:
      run: melos exec --fail-fast -- flutter analyze
    test:
      run: melos exec --fail-fast -- flutter test
    format:
      run: melos exec --fail-fast -- dart format .
    lint:public-imports:
      run: >-
        melos exec --scope="showcase" -- pwsh -NoProfile -Command "if (Select-String -Path lib/**/*.dart -Pattern 'package:components/(?!components\.dart)' -Quiet) { Write-Error 'Showcase must import only package:components/components.dart'; exit 1 }"
    showcase:run:windows:
      run: melos exec --scope="showcase" -- "pwsh -NoProfile -Command \"flutter clean; flutter pub get; flutter run -d windows\""
    showcase:run:chrome:
      run: melos exec --scope="showcase" -- flutter run -d chrome
